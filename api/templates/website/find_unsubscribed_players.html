{% extends "website/new-base.html" %}
{% block content %}

<select id="teamId">
    {% for team in teams %}
        <option value="{{team.id}}">
            {{team.name}}
        </option>
    {% endfor %}
</select>

<button type="button" class="btn btn-info" onclick="findPlayers();" >
    Unsubscribed Players
</button>
<ul class="listgroup leaderList" id="playerList">
</ul>


{% endblock %}
{% block script %}
<script>
function ready(){
    $('#teams').DataTable({
        "order": [[0, "asc"]]
    });
}

function findPlayers(){
    $('#playerList').empty();
    var teamId = $('#teamId').val();
    var element;
    var url = "{{route.findunsubscribed}}/{{year}}/" + teamId; 
    $.ajax
    ({
      type: "GET",
      url: url,
      contentType: "application/json",
      dataType: 'json',
      async: false,
      dataType: "json",
      success: function (players){
          for (var i=0; i<players.length; i++){
              element = '<li class="list-group-item leaderPoint">' + players[i].player_name + '</li>'
              $('#playerList').append(element);
          }
      }, error: function(request, error){
          alert("There was a problem. Contact scores@mlsb.ca");
          console.error(request);
          console.error(error);
    } 
    });
}
</script>
{% endblock %}